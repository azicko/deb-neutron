Description: Better config default
 The default of Neutron make it so that it's not usable by default, and hard to
 parse with maintainer scripts. This patch fixes that.
Author: Thomas Goirand <zigo@debian.org>
Forwarded: no
Last-Update: 2014-04-02

--- neutron-2014.1~rc1.orig/etc/l3_agent.ini
+++ neutron-2014.1~rc1/etc/l3_agent.ini
@@ -4,11 +4,10 @@
 
 # L3 requires that an interface driver be set. Choose the one that best
 # matches your plugin.
-# interface_driver =
 
 # Example of interface_driver option for OVS based plugins (OVS, Ryu, NEC)
 # that supports L3 agent
-# interface_driver = neutron.agent.linux.interface.OVSInterfaceDriver
+interface_driver = neutron.agent.linux.interface.OVSInterfaceDriver
 
 # Use veth for an OVS interface or not.
 # Support kernels with limited namespace support
--- neutron-2014.1~rc1.orig/etc/neutron.conf
+++ neutron-2014.1~rc1/etc/neutron.conf
@@ -50,8 +50,7 @@ lock_path = $state_path/lock
 # previous versions, the class name of a plugin can be specified instead of its
 # entrypoint name.
 #
-# core_plugin =
-# Example: core_plugin = ml2
+core_plugin = neutron.plugins.openvswitch.ovs_neutron_plugin.OVSNeutronPluginV2
 
 # (ListOpt) List of service plugin entrypoints to be loaded from the
 # neutron.service_plugins namespace. See setup.cfg for the entrypoint names of
@@ -59,8 +58,8 @@ lock_path = $state_path/lock
 # with previous versions, the class name of a plugin can be specified instead
 # of its entrypoint name.
 #
-# service_plugins =
 # Example: service_plugins = router,firewall,lbaas,vpnaas,metering
+service_plugins = l3_router,firewall,metering
 
 # Paste configuration file
 # api_paste_config = api-paste.ini
@@ -131,16 +130,16 @@ lock_path = $state_path/lock
 # SSL certification authority file (valid only if SSL enabled)
 # kombu_ssl_ca_certs =
 # IP address of the RabbitMQ installation
-# rabbit_host = localhost
+rabbit_host = localhost
 # Password of the RabbitMQ server
-# rabbit_password = guest
+rabbit_password = guest
 # Port where RabbitMQ server is running/listening
 # rabbit_port = 5672
 # RabbitMQ single or HA cluster (host:port pairs i.e: host1:5672, host2:5672)
 # rabbit_hosts is defaulted to '$rabbit_host:$rabbit_port'
 # rabbit_hosts = localhost:5672
 # User ID used for RabbitMQ connections
-# rabbit_userid = guest
+rabbit_userid = guest
 # Location of a virtual RabbitMQ installation.
 # rabbit_virtual_host = /
 # Maximum retries with trying to connect to RabbitMQ
@@ -380,7 +379,7 @@ notification_driver = neutron.openstack.
 # Use "sudo neutron-rootwrap /etc/neutron/rootwrap.conf" to use the real
 # root filter facility.
 # Change to "sudo" to skip the filtering and just run the comand directly
-# root_helper = sudo
+root_helper = sudo neutron-rootwrap /etc/neutron/rootwrap.conf
 
 # =========== items for agent management extension =============
 # seconds between nodes reporting state to server; should be less than
@@ -400,11 +399,9 @@ signing_dir = $state_path/keystone-signi
 
 [database]
 # This line MUST be changed to actually run the plugin.
-# Example:
-# connection = mysql://root:pass@127.0.0.1:3306/neutron
 # Replace 127.0.0.1 above with the IP address of the database used by the
 # main neutron server. (Leave it as is if the database runs on this host.)
-# connection = sqlite://
+connection = sqlite:///var/lib/neutron/neutrondb
 
 # The SQLAlchemy connection string used to connect to the slave database
 # slave_connection =
--- neutron-2014.1~rc1.orig/etc/lbaas_agent.ini
+++ neutron-2014.1~rc1/etc/lbaas_agent.ini
@@ -9,11 +9,10 @@
 
 # LBaas requires an interface driver be set. Choose the one that best
 # matches your plugin.
-# interface_driver =
 
 # Example of interface_driver option for OVS based plugins (OVS, Ryu, NEC, NVP,
 # BigSwitch/Floodlight)
-# interface_driver = neutron.agent.linux.interface.OVSInterfaceDriver
+interface_driver = neutron.agent.linux.interface.OVSInterfaceDriver
 
 # Use veth for an OVS interface or not.
 # Support kernels with limited namespace support
--- neutron-2014.1~rc1.orig/etc/neutron/plugins/openvswitch/ovs_neutron_plugin.ini
+++ neutron-2014.1~rc1/etc/neutron/plugins/openvswitch/ovs_neutron_plugin.ini
@@ -30,22 +30,22 @@
 #          point setting tunnel_type below will be required to enable
 #          tunneling.
 #
-# enable_tunneling = False
+enable_tunneling = True
 
 # (StrOpt) The type of tunnel network, if any, supported by the plugin. If
 # this is set, it will cause tunneling to be enabled. If this is not set and
 # the option enable_tunneling is set, this will default to 'gre'.
 #
-# tunnel_type =
 # Example: tunnel_type = gre
 # Example: tunnel_type = vxlan
+tunnel_type = gre
 
 # (ListOpt) Comma-separated list of <tun_min>:<tun_max> tuples
 # enumerating ranges of GRE or VXLAN tunnel IDs that are available for
 # tenant network allocation if tenant_network_type is 'gre' or 'vxlan'.
 #
-# tunnel_id_ranges =
 # Example: tunnel_id_ranges = 1:1000
+tunnel_id_ranges = 1:1000
 
 # Do not change this parameter unless you have a good reason to.
 # This is the name of the OVS integration bridge. There is one per hypervisor.
@@ -70,7 +70,7 @@
 # empty for the server. Set local-ip to be the local IP address of
 # this hypervisor.
 #
-# local_ip =
+local_ip = 127.0.0.1
 
 # (ListOpt) Comma-separated list of <physical_network>:<bridge> tuples
 # mapping physical network names to the agent's node-specific OVS
@@ -130,40 +130,10 @@
 
 [securitygroup]
 # Firewall driver for realizing neutron security group function.
-# firewall_driver = neutron.agent.firewall.NoopFirewallDriver
 # Example: firewall_driver = neutron.agent.linux.iptables_firewall.OVSHybridIptablesFirewallDriver
+# Example2: neutron.agent.firewall.NoopFirewallDriver
+firewall_driver = neutron.agent.linux.iptables_firewall.OVSHybridIptablesFirewallDriver
 
 # Controls if neutron security group is enabled or not.
 # It should be false when you use nova security group.
 # enable_security_group = True
-
-#-----------------------------------------------------------------------------
-# Sample Configurations.
-#-----------------------------------------------------------------------------
-#
-# 1. With VLANs on eth1.
-# [ovs]
-# network_vlan_ranges = default:2000:3999
-# tunnel_id_ranges =
-# integration_bridge = br-int
-# bridge_mappings = default:br-eth1
-#
-# 2. With GRE tunneling.
-# [ovs]
-# network_vlan_ranges =
-# tunnel_id_ranges = 1:1000
-# integration_bridge = br-int
-# tunnel_bridge = br-tun
-# local_ip = 10.0.0.3
-#
-# 3. With VXLAN tunneling.
-# [ovs]
-# network_vlan_ranges =
-# tenant_network_type = vxlan
-# tunnel_type = vxlan
-# tunnel_id_ranges = 1:1000
-# integration_bridge = br-int
-# tunnel_bridge = br-tun
-# local_ip = 10.0.0.3
-# [agent]
-# tunnel_types = vxlan
